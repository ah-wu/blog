<script>
function view(it,
function format(text){
	/* Unfortunately, the regex expr \r\n|\r is not the same as \r|\r\n */
	let list=text.replaceAll(/\r\n|\r/g,"\n").split(/\n\n/);
	let result=document.getElementById("result");
	result.innerHTML="";
	for(let x=0; x<list.length; x=x+1){
		let div=document.createElement("div");
		let title_begin=0;
		let title_end=list[x].indexOf("\n");
		let content_begin=title_end+1;
		div.dataset.title=list[x].substr(title_begin,title_end);
		div.dataset.content=list[x].substr(content_begin);
		div.id=`${x}`;
		let pdiv=document.createElement("div");
		pdiv.appendChild(div);
		pdiv.style.background="red";
		pdiv.innerHTML=`<button onclick="view(this,document.getElementById('${x}'))">Expand</button>${pdiv.innerHTML}<br>`
		
		result.appendChild(pdiv);
	}
}
function read(title){
	xhr=new XMLHttpRequest();
	xhr.onreadystatechange=function(){
		let DONE=4;
		let OK=200;
		if(this.readyState==DONE){
			if(this.status==OK){
				format(this.responseText);
			}else{
				document.getElementById("result").innerHTML=`<h3 style="color:red">Not found</h3>`;
			}
		}else{
			/*PASS*/
		}
	};
	xhr.open("GET",`./${title}.txt`);
	xhr.send();
}
</script>
<body>
<input type="search" style="width:100%;height:5%;" oninput="read(this.value)" onchange="read(this.value)" >
<div id="result" style="width:100%;height:95%;background:green;overflow:auto"></div>
</body>
