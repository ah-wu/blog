<script>
function video_handle(it){
      console.log(it.videoHeight);
      if(it.videoHeight==0){
            it.parentNode.removeChild(it);
      }else{
            /*PASS*/
      }
}
function audio_handle(it){
      if(Number.isNaN(it.duration)==true){
            it.parentNode.removeChild(it);
      }else{
            /*PASS*/
      }
}
function img(url){
      let img=document.createElement("img");
      img.src=url;
      img.style.width="100%";
      img.onerror=function(){this.parentNode.replaceChild(video(url),this)};
      return img;
}
function video(url){
      let video=document.createElement("video");
      video.src=url;
      video.style.width="100%";
      video.onerror=function(){this.parentNode.replaceChild(audio(url),this)};
      video.ondurationchange=function(){if(this.videoHeight==0){this.onerror()}else{/*PASS*/}};
      return video;
}
function audio(url){
      let audio=document.createElement("audio");
      audio.src=url;
      audio.style.width="100%";
      audio.onerror=function(){this.parentNode.replaceChild(a(url),this)};
      return audio;
}
function a(url){
      let a=document.createElement("a");
      a.href=url;
      a.style.width="100%";
      a.innerText=`Click Here\n`;
      return a;
}
function media(it,url){
      it.appendChild(img(url));
}
function test(it){
media(it,"test.jpg");
media(it,"PXL_20210507_121341889.mp4");
media(it,"GAI周延 - 在下霍元甲.mp3");
media(it,"blog.txt");
}
</script>
<body onload="test(document.getElementById('sh'))">
<h2>Media test</h2>
<div id="sh" ></div>
</body>
