<script>
function video_handle(it){
      if(it.videoHeight==0){
            it.parentNode.removeChild(it);
      }else{
            /*PASS*/
      }
}
function audio_handle(it){
      if(Number.isNaN(it.duration)==true){
            it.parentNode.removeChild(it);
      }else{
            /*PASS*/
      }
}
function media(it,url){
      let md=document.createElement("div");
      /*static count=0;*/
      md.style.width="100%";

      md.innerHTML=`
<img onerror="this.parentNode.removeChild(this)" src="${url}"
     style="width:100%" />
<video onerror="this.parentNode.removeChild(this)" 
       durationchange="video_handle(it)" controls src="${url}"  
     style="width:100%"></video>
<audio onerror="this.parentNode.removeChild(this)" controls src="${url}" 
     style="width:100%"></audio>`;

      it.appendChild(md);
}
function test(it){
media(it,"test.jpg");
media(it,"PXL_20210507_121341889.mp4");
media(it,"GAI周延 - 在下霍元甲.mp3");
media(it,"blog.txt");
}
</script>
<body onload="test(document.getElementById('sh'))">
<h2>Media test</h2>
<div id="sh" ></div>
</body>
