<script>
function media_load(it){
let img=document.getElementById(`${it.id}-img`);
let video=document.getElementById(`${it.id}-video`);
let audio=document.getElementById(`${it.id}-audio`);
let a=document.getElementById(`${it.id}-a`);
     if(img.naturalHeight==0){
          if(video.videoHeight==0){
              if(Number.isNaN(audio.duration)==true){
                   a.style.display="";
              }else{
                   audio.style.display="";
              }
          }else{
              video.style.display="";
          }
      }else{
          img.style.display="";
      }
it.onload=null;
}
var count=0;
function media(it,url){
      let md=document.createElement("div");
      /*static count=0;*/
      md.style.width="100%";
      md.id=`media[${count}]`;
      md.onload=`media_onload(
                 document.getElementById("${md.id}")
                )`;

      md.innerHTML=`
<img src="${url}" 
     id="${md.id}-img" 
     style="display:none;width:100%" />
<video controls src="${url}" 
     id="${md.id}-video" 
     style="display:none;width:100%"></video>
<audio controls src="${url}" 
     id="${md.id}-audio" 
     style="display:none;width:100%"></audio>
<a href="${url}" 
     id="{md.id}-a"
     style="display:none;width:100%"></a>`;

      it.appendChild(md);
      count=count+1;
}
function test(it){
media(it,"test.jpg");
media(it,"PXL_20210507_121341889.mp4");
media(it,"GAI周延 - 在下霍元甲.mp3");
media(it,"blog.txt");
}
</script>
<body onload="test(document.getElementById('sh'))">
<h2>Media test</h2>
<div id="sh" ></div>
</body>
